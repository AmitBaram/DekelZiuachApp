<Window x:Class="DekelApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:DekelApp.ViewModels"
        xmlns:views="clr-namespace:DekelApp.Views"
        mc:Ignorable="d"
        Title="Dekel Application" Height="720" Width="1150"
        MinWidth="950" MinHeight="600"
        WindowStartupLocation="Manual" Top="20" Left="50"
        Background="{DynamicResource WindowBackgroundBrush}"
        FlowDirection="RightToLeft">
    <Window.Resources>
        <!-- DataTemplates -->
        <DataTemplate DataType="{x:Type vm:TichumLayersViewModel}"><views:TichumLayersView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:MikudLayersViewModel}"><views:MikudLayersView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:FormatsViewModel}"><views:FormatsView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:TichumViewModel}"><views:TichumView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:MikudViewModel}"><views:MikudView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:YeadimViewModel}"><views:YeadimView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:GeneralInfoViewModel}"><views:GeneralInfoView /></DataTemplate>
        <DataTemplate DataType="{x:Type vm:FinishViewModel}"><views:FinishView /></DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0" Background="{DynamicResource CardBackgroundBrush}" BorderBrush="{DynamicResource SidebarSeparationBrush}" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo/Title and Theme Toggle -->
                <StackPanel Grid.Row="0" Margin="30,30,30,30">
                    <Grid Margin="0,0,0,20">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="המצייח" FontSize="26" FontWeight="Bold" Foreground="{DynamicResource PrimaryTextBrush}"/>
                        </StackPanel>
                        
                        <!-- Modern Theme Toggle -->
                        <ToggleButton x:Name="ThemeToggle" HorizontalAlignment="Right" VerticalAlignment="Center"
                                      Checked="ThemeToggle_Checked" Unchecked="ThemeToggle_Unchecked"
                                      Cursor="Hand" Width="40" Height="40">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border x:Name="Border" CornerRadius="20" Background="Transparent" BorderThickness="1" BorderBrush="Transparent">
                                        <Grid>
                                            <!-- Moon Icon (Visible when Unchecked/Light) -->
                                            <Path x:Name="MoonIcon" 
                                                  Data="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" 
                                                  Fill="{DynamicResource SecondaryTextBrush}" 
                                                  Width="20" Height="20" Stretch="Uniform"
                                                  RenderTransformOrigin="0.5,0.5">
                                                <Path.RenderTransform>
                                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                </Path.RenderTransform>
                                            </Path>
                                            
                                            <!-- Sun Icon (Visible when Checked/Dark) -->
                                            <Path x:Name="SunIcon" 
                                                  Data="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.29 1.29c.19.19.45.29.71.29s.51-.1.71-.29a.996.996 0 000-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.29 1.29c.18.19.43.29.71.29.27 0 .52-.11.71-.29a.996.996 0 000-1.41l-1.3-1.29zM19.07 5.29a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.29 1.29a.996.996 0 000 1.41c.19.2.45.3.71.3.26 0 .51-.1.71-.29l1.28-1.3zM6.69 18.36a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.29 1.29c.19.19.45.29.71.29s.51-.1.71-.29a.996.996 0 000-1.41l-1.3-1.29z" 
                                                  Fill="#FDB813" 
                                                  Width="22" Height="22" Stretch="Uniform"
                                                  Visibility="Collapsed"
                                                  RenderTransformOrigin="0.5,0.5">
                                                <Path.RenderTransform>
                                                    <RotateTransform Angle="0"/>
                                                </Path.RenderTransform>
                                            </Path>
                                        </Grid>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{DynamicResource HoverBackgroundBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="MoonIcon" Property="Visibility" Value="Collapsed"/>
                                            <Setter TargetName="SunIcon" Property="Visibility" Value="Visible"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                    </Grid>
                    
                    <TextBlock Text="תוכנה לציוד מבצעי" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                </StackPanel>

                <!-- Navigation List -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden">
                    <StackPanel>
                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateGeneralInfoCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:GeneralInfoViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path x:Name="SidebarIconElement" Data="{StaticResource IconGeneral}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" מידע כללי " VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateFormatsCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:FormatsViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconFormats}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" פורמטים" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateTichumCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:TichumViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconTichum}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" תיחום" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateMikudCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:MikudViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconMikud}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" מיקוד" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateTichumLayersCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:TichumLayersViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconLayers}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" שכבות תיחום" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateMikudLayersCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:MikudLayersViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconLayers}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" שכבות מיקוד" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>

                        <RadioButton Style="{StaticResource SidebarItemStyle}" Command="{Binding NavigateYeadimCommand}" IsChecked="{Binding Navigation.CurrentViewModel, Mode=OneWay, Converter={StaticResource TypeToBooleanConverter}, ConverterParameter={x:Type vm:YeadimViewModel}}">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource IconYeadim}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=RadioButton}}" Width="20" Height="20" Stretch="Uniform" Margin="15,0,0,0"/>
                                <TextBlock Text=" יעדים" VerticalAlignment="Center" FontSize="15" FontWeight="Medium"/>
                            </StackPanel>
                        </RadioButton>
                    </StackPanel>
                </ScrollViewer>

                <!-- Footer section with different background -->
                <Border Grid.Row="2" Background="#F8FAFC" BorderBrush="#F1F5F9" BorderThickness="0,1,0,0">
                    <Button Content="סיום והפקה" 
                            Command="{Binding NavigateFinishCommand}"
                            Margin="25,30,25,35" 
                            Height="60" 
                            Background="{StaticResource PrimaryBlueBrush}" 
                            Foreground="White" 
                            FontSize="17"
                            FontWeight="Bold" 
                            BorderThickness="0">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="12"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </Border>
            </Grid>
        </Border>

        <!-- Main Content wrapped in ScrollViewer for resizing -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ContentControl Content="{Binding Navigation.CurrentViewModel}" Margin="40,30,40,30"/>
        </ScrollViewer>
    </Grid>
</Window>
